========================================================================
Description: Implement nnet (Yale)
Proposer: 
DateProposed: 
Status: 
Effort: 
Required: 
Completed: 

061230 This is not so satraightforward. I want this for two class
prediction, so need a framework for building a model and then
generating the predictions.  Currently the following is not quite
it....

crs$nnet <- nnet(as.factor(Adjusted) ~ ., data=......, size=1, na.action=na.omit)predict(crs$nnet, crs$dataset[crs$sample,c(1:6,9,12)], type="class")


========================================================================
Description: Optionally add cluster statistics.
Proposer: Graham Williams
DateProposed: 20 Oct 2006
Status: Done for kmeans. Do for hclust
Effort: 2 hours
Required: 

This would be something like the output of

library(fpc)
cluster.stats(dist(crs$dataset[crs$sample,c(2,7,9:10,12)]), crs$kmeans$cluster)

Can it be pretty printed for the textview?

Also, move to using buttons to generate plots and additional statistics.

Currently to do - in hclust, enable the number of clusters and the
statstics and discriminant plot. Whenever the number of clusters
changes, update the internal crs variable to record this. And the
buttons then work from this??? Perhaps.

========================================================================
Decsription: Improve hclust options
Proposer: Stuart Hamilton
DateProposed: 12 Oct 2006
Status: Suggested
Effort: 2 hours
Required: 

Explore hclust and then cutree options for hclust. Then also include
the cluster.stats summary.

crs$hclust <- hclust(dist(crs$dataset[crs$sample,c(2,7,9:10,12)]), "ave")
cluster.stats(dist(crs$dataset[crs$sample,c(2,7,9:10,12)]), cutree(crs$hclust,10))
plotcluster(crs$dataset[crs$sample,c(2,7,9:10,12)], cutree(crs$hclust,10))

========================================================================
Decsription: Move to using kmeansCBI etc for all clustering.
Proposer: Graham Williams
DateProposed: 20 Oct 2006
Status: Suggested
Effort: 4 hours
Required: 

Seems to provide a uniform interface and uniform output.

But each model produces a lot more output. Do I really want to have
all of that included in the model? crs will get large.

========================================================================
Decsription: Multiple evaluation plots for kmeans
Proposer: Graham Williams
DateProposed: 21 October 2006
Status: Suggested
Effort: 2 hours
Required: 
Completed: 

plotcluster in fpc can plot many different plots. Perhaps plot several
in the one plot. Need to determine which ones would be useful.

========================================================================
IMPUTATION

Proposer: Michael.

Impute using KNN

http://www.napier.ac.uk/depts/fhls/peas/imputation.asp

------------------------------------------------------------------------

mix has mi.inference but did not look like it did what I was wanting.

------------------------------------------------------------------------

EMV has knn for imputation from knn. Works only on numeric matrix.

------------------------------------------------------------------------

mice looks promising but get errors:

mp <- mice(crs$dataset)

 iter imp variable
  1   1  Employment  Employment.d.1  Occupation  Occupation.d.1  AccountsError in nnet.default(X, Y, w, mask = mask, size = 0, skip = TRUE, softmax = TRUE,  :
        too many (1683) weights

However, 

md.patter(crs$datset) gives very useful information:

     ID Age Education Marital Income Sex Deductions Hours Adjustment Adjusted
1859  1   1         1       1      1   1          1     1          1        1
   1  1   1         1       1      1   1          1     1          1        1
  40  1   1         1       1      1   1          1     1          1        1
  97  1   1         1       1      1   1          1     1          1        1
   3  1   1         1       1      1   1          1     1          1        1
      0   0         0       0      0   0          0     0          0        0
     Accounts Employment Occupation
1859        1          1          1   0
   1        1          1          0   1
  40        0          1          1   1
  97        1          0          0   2
   3        0          0          0   3
           43        100        101 244

Here, 1859 entities have no missing values (i.e, a row of 1's and the
final column is 0). 1 entity has a missing value for Occupation only
(i.e, a row of 1's except under occupation where it is 0, and the
final column is 1, indicating just 1 missing value). 40 entities have
missing values for Accounts only, 90 have missing values for both
Employment and Occupation, and 3 entities for all of Account,
Employment and Occupation.

This would be very useful information to include in Rattle.

------------------------------------------------------------------------

Amelia II http://gking.harvard.edu/amelia/ Is this really primarily
for time series? An initial test indicates not much from this. Could
not get categoricals working.

output <- amelia(data=ds[,c(1,2,7,9,10,12,13)], m=1)

========================================================================

OLD

Implement Marco's Transform/Cut/Factorise code?

Version 2.2

  General: 
    Export functionality

  Data Tab:
    Access SQLite database

  Evaluate Tab: 
    Implement distribution comparison
    Generate plots to compare distributions
    Model Type = "All" for all built models or use check boxes?

  Model tab
    Use tune to build the best model: rpart, randomForest, svm


TODO

  General:
    Export each model to PMML, SQL, and standalone R script.
    Add an argument to rattle to load the csv file.
    Add a button to run an R script? (Tony Nolan)
    Add R commands to status line as they are run (Tony Nolan)
    Use rgl for sophisticated graphics?

  Data:
    Drop down data type for each variable perform transform (Robert Williams)

  Cluster:
    Multiple kmeans and plot to find best k (Enrico)

  Models:
    Neural Networks using netalg
    Bayesian using bayesm

  Plots:
    All plots into a Cairo tabbed window!

========================================================================

MAJOR

Export button
	For Explore tab's Distribution option, export bunch of plots.
	Export of Model should generate PMML of the model.
	Export of Explore->Plot should generate PDF or PNGs of the plots.




Can hier cluster rescale images (Linda)

========================================================================

POSSIBLE

Data tab's ODBC option
	Allow username and password to be specified
	Allow a filename (abc.mdb or efg.xls) and use appropriate calls
		crs$odbc <- odbcConnectExcel("h:/sample.xls")
		crs$odbc <- odbcConnectAccess("h:/sample.mdb")

Memory
	Have a look at biglm for lm on blocks of data - can do 23 million rows

========================================================================

Rewrite based on example code from Rcmdr as in QCUGUI
Identify where Warnings occur and use suppressWarnings(code...)
When execute, for each categorical, if num levels differ, report in TV
Automatically identify bad boxplots (outliers) and do log.
Graphs to compare distributions of the same variables between datasets 
Write article for Newsletter
prcomp: NAs in data cause failure - temp soln is use na.omit(ds) and warn.
For each textview, add initial text to explain the point (c.f. prcomp)
##   2-way tables work (heatmap over cells chi-square significant) (Rohan)
##   Add t/z test and chi2 test in explore tab (Tony)
##   Some solution to the blotches in the hierarchical clusters (Linda)
##   Automatically add in an optimal line to risk plot?
##   Add a Cancel/Stop button (Michael)
##   Kernel optimisation ala KXEN.
##   Model visualisation for SVMs 
##   Better report generation for direct inclusion in reports! 
##   3D visualisation of SVM in R (Tony)
##   Outputs - generate a report in Word (Tony)
##   For each library command, check it is available, as with rpart.
##   Need some checks to ensure the weight ends up numeric.
##   Add a threshold value (e.g. 0.2) for use in the Evaluation charts (Ed Cox)
##   For HierCor (and others) convert factors to integers (Tony)
##   Allow Variable types to be changed e.g., factor to integer? (Tony)
##   Save file with ID, Decision (use threshold), Probability (Ed Cox, Fuchun)
##   Evaluate: Add OOB evaluations (Eugene)
##   MODEL RF: Should sampsize be a proportion
##   Seriation plot: add a mouse hover to provide extra info (Tony)
##   Seriation plot: Click to plot all below the click (Tony)
##   Seriation plot: cf Tony's terrain plot and explain
##   Hierachical clustering to highlight targets (hot spots).
##   Get AUC as a measure for ROC curves.
##   Add seriation/colour denrogram www.lirmm.fr/~caraux/PermutMatrix/ (Stuart)
##   Variables: For ratios SAS/EM quantile transform is good - Rohan
##   Add a new Score tab to score a new dataset and save the results. (Fuchun)
##   Explain lift better in the lift tooltip.
##   For multiple targets, choose a different logistic regression method.
##   Print any text view via a Print button.
##   Add MARS (mda package).
##   CLUSTER HIERCOR: Set text size based on # of branches?
##   EVALUATE: Give error if Variables changed but model not regenerated.
##   MISC: When changing tabs, warn if modified but not executed.
##   BUG: Sample 10% not noticed until ENTER????
##   MISC: Run quit.rattle() when root window destroyed.
##   DATA: Get header, rows, sep, and na.strings working
##   MODEL RPART: Use print.rules.cmd string for log and eval
##   MODEL: GBM: Implement and document new options
##   EVALUATE RISK: If VARIABLE empty, then just do no Risk curve.
##   EVALUATE: Error when test set has factor levels different to train
##   EVALUATE: Use the text areas to describe the charts.
##   EVALUATE: When Sampling, be sure to apply to only the sample.
##   EVALUATE: Add grids to all plots
##   INIT: Make filename the first active widget. TAB then to Execute.
##   MODEL: Multiple models then optimise with best?
##   Help -> Search ... brings up a text entry box
##   Help -> Function ... brings up a text entry box
##   DATA: In the file chooser replace Open with Select?
##   Seriation plot: set point size to tiny (at least can save as PDF to zoom).
##   VARIABLES: Could colour the text in Variable column according to role.
##   MODEL note when sample has changed, model not updated and we eveluate
##	SAMPLE: Use sample.split of caTools to partition test/train on
##	target to maintain outcome ratio (and thus more likely to
##	ensure there are samples from each class, unlike any old
##	sample).  This does not get around the problem with sampling
##	not including all possible levels for the input variables so it
##	won't help where the testset does not have all possible
##	levels. RandomForest will still complain on the predict.
